sonar.projectKey=mayflower_mayflower_sandbox_c110f116-4c70-4ebf-8e19-287338408514

# Source directories
sonar.sources=src
sonar.sourceEncoding=UTF-8

# Exclusions - vendored code and generated files
sonar.exclusions=**/.venv/**,**/venv/**,**/__pycache__/**,**/dist/**,**/*.min.js,**/uv.lock

# Test file patterns
sonar.tests=tests
sonar.test.inclusions=**/tests/**,**/test_*.py,**/*_test.ts

# Python settings
sonar.python.version=3.10

# Coverage reports
# Python coverage (generated by pytest-cov)
sonar.python.coverage.reportPaths=coverage.xml

# TypeScript/JavaScript coverage (generated by Deno)
# Try both native LCOV format and generic XML format
sonar.javascript.lcov.reportPaths=deno-coverage.lcov

# Coverage exclusions - modules not suitable for unit testing
# 1. Pyodide sandbox helpers (run inside isolated WebAssembly, coverage can't be tracked)
# 2. TypeScript integration modules (require Pyodide npm package, tested via Python e2e)
# 3. Python integration modules (coordinate subprocesses, DB, external services - tested via e2e)
sonar.coverage.exclusions=**/helpers/document/**,**/helpers/_install.py,**/helpers/__init__.py,src/mayflower_sandbox/executor.ts,src/mayflower_sandbox/worker_server.ts,src/mayflower_sandbox/sandbox_executor.py,src/mayflower_sandbox/mcp_bindings.py,src/mayflower_sandbox/worker_pool.py,src/mayflower_sandbox/integrations.py,src/mayflower_sandbox/tools/execute_code.py,src/mayflower_sandbox/tools/file_glob.py,src/mayflower_sandbox/server.py

# Security exclusions - Pyodide sandbox helper modules
# These run inside an isolated WebAssembly sandbox, not in the host environment.
# The sandbox isolation mitigates security risks (e.g., XXE in XML parsing).
sonar.security.exclusions=**/helpers/document/**,**/helpers/_install.py

# JUnit test results (generated by pytest --junitxml)
sonar.python.xunit.reportPath=junit.xml

# External tool reports (SARIF format)
# These are passed via CLI: -Dsonar.sarifReportPaths=...
# Format: SARIF 2.1.0 (Static Analysis Results Interchange Format)
#
# Tools providing SARIF to SonarQube:
# - ruff-results.sarif: Python linting (includes flake8-bandit S rules for security)
# - mypy-results.sarif: Type checking (via inline JSON-to-SARIF conversion in CI)
#
# External analyzers (native SonarQube import):
# - bandit-results.json: Python security scanner (sonar.python.bandit.reportPaths)
# - eslint-results.json: TypeScript linting (sonar.eslint.reportPaths)
#
# Tools NOT providing SARIF (console output only):
# - ty: No SARIF support (Astral's type checker, uses --output-format=github)
